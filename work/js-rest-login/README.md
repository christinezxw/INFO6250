# REST & SPA LOGIN

* start from the up-to-date main branch (`git checkout main; git pull origin main`)
* Create a feature branch named 'js-rest-login' (`git checkout -b js-rest-login`)
* modify the files in this directory to have the require features
* add, commit, and push the branch to github
* Create a PR to merge to main
* Be sure to include the TA(s) and I as reviewers.  
* Due by 11:59pm (PT) Sun Mar 21

## Goals and Requirements

You will be writing a REST-based SPA that provides a list of scored items with a login.

Key features will be:
- The page will require a login (and permit logout and re-login)
- Each user (by username) will have their own distinct list of items
  - the list will survive them logging out and logging back in
  - if a user logs in on two different browsers, they will share a list
  - hint: this means the list of items should be stored by username and not by sid
- Each item has a name and must have a score from 1 to 5
  - These can be shown as numbers, stars, thumbs up, hearts, however you like as long as the TAs and myself can recognize the ranking
- Each item can have the ranking changed
  - Special requirement: The service call to update the ranking should not return the full state, only the single updated item
  - Other services can return more or less data, as long as you can meet the other requirements 
- Each item can be deleted from the list
- New items can be added to the list
- The items can be sorted in ascending or descending order by score
  - Unlike the other changes, this should be done on the displayed page only, not the server
  - This sorting will not be reflected in other logged in windows
  - This sorting will not survive a page reload
  - This sorting WILL survive actions on the page, such as adding/deleting items or changing the ranking of an item
    - Any changes made (additions/deletions/changed rankings) will continue to match the sorting (example: if the page is sorted from high-to-low and an item is changed from score 1 to score 5, it will move up on the list as soon as the score is changed
- Every 5 seconds (roughly) the page will fetch an updated list of items from the server and display any changes
  - This update should not erase any not-yet-finished addition

As a result of the above:
- If the same username is logged in on two separate browsers, a change on one list will go to the server and soon appear on the other browser
  - Hint: Use different profiles or incognito mode to test with the same user, otherwise they will be the same sid

## Implementation Requirements

- You must use webpack and babel to bundle and transpile your code
- Your package.json should define a 'build' step
  - this means `npm run build` should call `npx webpack`
  - you have to add to the `scripts` section of your `package.json` as discussed back in section 1 of the class
- You should show separation of concerns (and use separate files) for:
  - server-side model logic (storing the user lists and sessions)
  - client-side services and client-side HTML manipulation
- There should only be one single page load for the site
  - even if a user logs in, then logs out, then logs in again
- You should check the username for permissible values ("dog" should be rejected)
- Errors on failed login attempts should be shown to the user
- Errors should send error-codes from the service, but be shown as friendly messages to the user
- All service calls should follow the 3 RESTful rules given in class
- All service data in request/response bodies should be sent as JSON

## Structure
- This page will be served by a express server you write (a single static HTML page, static CSS, static client-side JS, and REST endpoints)
- There will be no HTML on the server or generated by server-side JS except for the single static HTML page  
- All other HTML will be built via the client-side JS
- All service endpoints will use RESTful URLs
- All service endpoints will use RESTful HTTP methods
- All service endpoints will use HTTP Status codes in a RESTful manner
- All service endpoints that take more than a single piece of input will accept data as JSON in the body of the request
- All services will return data in JSON (if they return data outside of status code)
- All services that return JSON data should have the `content-type` header of `application/json` (hint: res.json() does this for you)
- All server-side model logic should be in a separate file from your server file
- Manually reloading the page will refresh the page but show the current data from the server
- Your code must be runnable with `npm install`, `npm run build` and `node server.js`, then going to `http://localhost:3000/`
  - Did you notice the bit about `npm run build` there?

## Logic
- Do NOT use the DOM to store state 
  - You may use "data-(whatever)" values to store indexes, ids, or other ways to connect the elements to their data sources
  - Do NOT use "data-(whatever)" values to hold more than identifiers. 
- Achieve any visual differences from adding/removing classes
  - Do NOT add "style" attributes
  - disabling/enabling a button is not a visual difference, so that is not done via a class change
- The page should only reload if the user themselves does it, not because of your code

## Visuals
- Make your application reasonably attractive
- Include enough space around items
- Have elements reasonably aligned

## Additional Requirements
- Follow the best practices described in class, in the code-review doc, and in the best-practices in the readings
- Use Semantic HTML as much as you can
- Make sure your .js file(s) are clear and organized, not just a jumble of code
- Follow any suggestions previously given to you in code reviews
- Do NOT use localStorage, sessionStorage, IndexedDB, cookies, or other forms of client-side storage, except a cookie to hold a `sid` value
- Do NOT interact with the browser url, including hash fragment
- Do NOT include files in your PR that are outside the assignment (no IDE configs, `node_modules/`, etc)
* Do not use external JS other than express, cookie-parser, uuid, and the listed babel and webpack modules
  - nodemon is optionally available for use
* Do not use external CSS libraries
* You may not use floats to do more than manage flowing text with images
* You may not use HTML tables or CSS table layouts
* You may not use CSS preprocessors, minifiers, or other tools to modify your CSS
  * I and the TA(s) must be able to read it easily

